(()=>{var t={9670:(t,e,r)=>{var n=r(111);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},1318:(t,e,r)=>{var n=r(5656),i=r(7466),o=r(1400),a=function(t){return function(e,r,a){var c,s=n(e),l=i(s.length),d=o(a,l);if(t&&r!=r){for(;l>d;)if((c=s[d++])!=c)return!0}else for(;l>d;d++)if((t||d in s)&&s[d]===r)return t||d||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},4326:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},9920:(t,e,r)=>{var n=r(6656),i=r(3887),o=r(1236),a=r(3070);t.exports=function(t,e){for(var r=i(e),c=a.f,s=o.f,l=0;l<r.length;l++){var d=r[l];n(t,d)||c(t,d,s(e,d))}}},8880:(t,e,r)=>{var n=r(9781),i=r(3070),o=r(9114);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9781:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(t,e,r)=>{var n=r(7854),i=r(111),o=n.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},8113:(t,e,r)=>{var n=r(5005);t.exports=n("navigator","userAgent")||""},7392:(t,e,r)=>{var n,i,o=r(7854),a=r(8113),c=o.process,s=o.Deno,l=c&&c.versions||s&&s.version,d=l&&l.v8;d?i=(n=d.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=n[1]),t.exports=i&&+i},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(t,e,r)=>{var n=r(7854),i=r(1236).f,o=r(8880),a=r(1320),c=r(3505),s=r(9920),l=r(4705);t.exports=function(t,e){var r,d,u,f,p,h=t.target,v=t.global,m=t.stat;if(r=v?n:m?n[h]||c(h,{}):(n[h]||{}).prototype)for(d in e){if(f=e[d],u=t.noTargetGet?(p=i(r,d))&&p.value:r[d],!l(v?d:h+(m?".":"#")+d,t.forced)&&void 0!==u){if(typeof f==typeof u)continue;s(f,u)}(t.sham||u&&u.sham)&&o(f,"sham",!0),a(r,d,f,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},5005:(t,e,r)=>{var n=r(7854),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t]):n[t]&&n[t][e]}},7854:(t,e,r)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},6656:(t,e,r)=>{var n=r(7908),i={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return i.call(n(t),e)}},3501:t=>{t.exports={}},4664:(t,e,r)=>{var n=r(9781),i=r(7293),o=r(317);t.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,r)=>{var n=r(7293),i=r(4326),o="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},2788:(t,e,r)=>{var n=r(5465),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return i.call(t)}),t.exports=n.inspectSource},9909:(t,e,r)=>{var n,i,o,a=r(8536),c=r(7854),s=r(111),l=r(8880),d=r(6656),u=r(5465),f=r(6200),p=r(3501),h="Object already initialized",v=c.WeakMap;if(a||u.state){var m=u.state||(u.state=new v),y=m.get,g=m.has,b=m.set;n=function(t,e){if(g.call(m,t))throw new TypeError(h);return e.facade=t,b.call(m,t,e),e},i=function(t){return y.call(m,t)||{}},o=function(t){return g.call(m,t)}}else{var k=f("state");p[k]=!0,n=function(t,e){if(d(t,k))throw new TypeError(h);return e.facade=t,l(t,k,e),e},i=function(t){return d(t,k)?t[k]:{}},o=function(t){return d(t,k)}}t.exports={set:n,get:i,has:o,enforce:function(t){return o(t)?i(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!s(e)||(r=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},4705:(t,e,r)=>{var n=r(7293),i=/#|\.prototype\./,o=function(t,e){var r=c[a(t)];return r==l||r!=s&&("function"==typeof e?n(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=o.data={},s=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},111:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1913:t=>{t.exports=!1},2190:(t,e,r)=>{var n=r(5005),i=r(3307);t.exports=i?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return"function"==typeof e&&Object(t)instanceof e}},133:(t,e,r)=>{var n=r(7392),i=r(7293);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8536:(t,e,r)=>{var n=r(7854),i=r(2788),o=n.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},3070:(t,e,r)=>{var n=r(9781),i=r(4664),o=r(9670),a=r(4948),c=Object.defineProperty;e.f=n?c:function(t,e,r){if(o(t),e=a(e),o(r),i)try{return c(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1236:(t,e,r)=>{var n=r(9781),i=r(5296),o=r(9114),a=r(5656),c=r(4948),s=r(6656),l=r(4664),d=Object.getOwnPropertyDescriptor;e.f=n?d:function(t,e){if(t=a(t),e=c(e),l)try{return d(t,e)}catch(t){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},8006:(t,e,r)=>{var n=r(6324),i=r(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},6324:(t,e,r)=>{var n=r(6656),i=r(5656),o=r(1318).indexOf,a=r(3501);t.exports=function(t,e){var r,c=i(t),s=0,l=[];for(r in c)!n(a,r)&&n(c,r)&&l.push(r);for(;e.length>s;)n(c,r=e[s++])&&(~o(l,r)||l.push(r));return l}},5296:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},2140:(t,e,r)=>{var n=r(111);t.exports=function(t,e){var r,i;if("string"===e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if("string"!==e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},3887:(t,e,r)=>{var n=r(5005),i=r(8006),o=r(5181),a=r(9670);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(a(t)),r=o.f;return r?e.concat(r(t)):e}},1320:(t,e,r)=>{var n=r(7854),i=r(8880),o=r(6656),a=r(3505),c=r(2788),s=r(9909),l=s.get,d=s.enforce,u=String(String).split("String");(t.exports=function(t,e,r,c){var s,l=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,p=!!c&&!!c.noTargetGet;"function"==typeof r&&("string"!=typeof e||o(r,"name")||i(r,"name",e),(s=d(r)).source||(s.source=u.join("string"==typeof e?e:""))),t!==n?(l?!p&&t[e]&&(f=!0):delete t[e],f?t[e]=r:i(t,e,r)):f?t[e]=r:a(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||c(this)}))},4488:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},3505:(t,e,r)=>{var n=r(7854);t.exports=function(t,e){try{Object.defineProperty(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},6200:(t,e,r)=>{var n=r(2309),i=r(9711),o=n("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:(t,e,r)=>{var n=r(7854),i=r(3505),o="__core-js_shared__",a=n[o]||i(o,{});t.exports=a},2309:(t,e,r)=>{var n=r(1913),i=r(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.16.0",mode:n?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},1400:(t,e,r)=>{var n=r(9958),i=Math.max,o=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):o(r,e)}},5656:(t,e,r)=>{var n=r(8361),i=r(4488);t.exports=function(t){return n(i(t))}},9958:t=>{var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},7466:(t,e,r)=>{var n=r(9958),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},7908:(t,e,r)=>{var n=r(4488);t.exports=function(t){return Object(n(t))}},7593:(t,e,r)=>{var n=r(111),i=r(2190),o=r(2140),a=r(5112)("toPrimitive");t.exports=function(t,e){if(!n(t)||i(t))return t;var r,c=t[a];if(void 0!==c){if(void 0===e&&(e="default"),r=c.call(t,e),!n(r)||i(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},4948:(t,e,r)=>{var n=r(7593),i=r(2190);t.exports=function(t){var e=n(t,"string");return i(e)?e:String(e)}},9711:t=>{var e=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+r).toString(36)}},3307:(t,e,r)=>{var n=r(133);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:(t,e,r)=>{var n=r(7854),i=r(2309),o=r(6656),a=r(9711),c=r(133),s=r(3307),l=i("wks"),d=n.Symbol,u=s?d:d&&d.withoutSetter||a;t.exports=function(t){return o(l,t)&&(c||"string"==typeof l[t])||(c&&o(d,t)?l[t]=d[t]:l[t]=u("Symbol."+t)),l[t]}},1817:(t,e,r)=>{"use strict";var n=r(2109),i=r(9781),o=r(7854),a=r(6656),c=r(111),s=r(3070).f,l=r(9920),d=o.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};l(f,d);var p=f.prototype=d.prototype;p.constructor=f;var h=p.toString,v="Symbol(test)"==String(d("test")),m=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=h.call(t);if(a(u,t))return"";var r=v?e.slice(7,-1):e.replace(m,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:f})}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";r(1817);const t=async t=>{const e=`https://ahj-http-backend-app.herokuapp.com/?${t.query}`,r=await fetch(e,{method:t.method,body:t.data?JSON.stringify(t.data):null}),n=await r.json();return t.callback&&t.callback(n),n};class e{list(e){return t({method:"GET",query:"method=allTickets",callback:e})}get(e,r){return t({method:"GET",query:`method=ticketById&id=${e}`,callback:r})}create(e,r){return t({method:"POST",query:"method=createTicket",data:e,callback:r})}update(e,r,n){return t({method:"POST",query:`method=updateById&id=${e}`,data:r,callback:n})}delete(e,r){return t({method:"GET",query:`method=deleteById&id=${e}`,callback:r})}}const n=document.getElementById("main");new class{constructor(t){this.container=t,this.api=new e}init(){this.registerEvents(),this.api.list(this.renderTickets.bind(this)),this.closeDeleteModal(),this.closeEditModal()}registerEvents(){document.querySelector(".container__add-ticket").addEventListener("click",(()=>{this.showAddModal()})),this.modalAddEl.querySelector(".modal__ok").addEventListener("click",(t=>{t.stopImmediatePropagation();const e={name:this.formAddTicketEl.elements.name.value,description:this.formAddTicketEl.elements.description.value};this.formAddTicketEl.elements.name.value="",this.formAddTicketEl.elements.description.value="",this.addNewTicket(e),this.modalAddEl.classList.add("hidden")}));document.querySelector(".container__tickets").addEventListener("click",(t=>{if(t.target.closest(".ticket__edit")||t.target.closest(".ticket__delete")||t.target.closest(".ticket__status")||this.showDescription(t),t.target.closest(".ticket__status")){const e=t.target.closest(".ticket"),{id:r}=e.dataset;this.changeStatus(r)}if(t.target.closest(".ticket__edit")){const e=t.target.closest(".ticket"),{id:r}=e.dataset;this.editTicket(r);this.modalEditEl.querySelector(".modal__ok").addEventListener("click",(t=>{t.stopImmediatePropagation(),this.makeEdit(r),this.modalEditEl.classList.add("hidden")}))}if(t.target.closest(".ticket__delete")){const e=t.target.closest(".ticket"),{id:r}=e.dataset,n=this.container.querySelector(".modal__delete");n.classList.toggle("hidden");n.querySelector(".modal__ok").addEventListener("click",(t=>{t.stopImmediatePropagation(),this.deleteTicket(r),n.classList.add("hidden")}))}}))}get ticketContainer(){return this.container.querySelector(".container__tickets")}get modalAddEl(){return this.container.querySelector(".modal__add")}get modalEditEl(){return this.container.querySelector(".modal__edit")}get formAddTicketEl(){return this.modalAddEl.querySelector("form")}get formElement(){return this.modalEditEl.querySelector("form")}renderTickets(t=[]){t.forEach((t=>{const e=this.render(t);this.ticketContainer.insertAdjacentHTML("beforeend",e)}))}render(t){const e=new Date(t.created),r=`${e.toLocaleDateString()} ${e.toLocaleTimeString().slice(0,5)}`;return`\n    <div class="ticket" data-id="${t.id}">\n            <div class="ticket__body">\n              <div class="ticket__status">\n                <span class="${t.status}"></span>\n              </div>\n              <div class="ticket__text">${t.name}</div>\n              <div class="ticket__data">${r}</div>\n              <div class="ticket__edit">\n                <span class="ticket__edit-img"></span>\n              </div>\n              <div class="ticket__delete">\n                <span class="ticket__delete-img"></span>\n              </div>\n            </div>\n            <div class="ticket__description hidden">${t.description}</div>\n          </div>\n    `}showAddModal(){const t=document.querySelector(".modal__add");t.classList.toggle("hidden");document.querySelector(".modal__close").addEventListener("click",(()=>{t.classList.add("hidden")}))}showEditModal(t){const{formElement:e}=this;e.elements.name.value=t.name,e.elements.description.value=t.description||"No information",this.modalEditEl.classList.toggle("hidden")}showDescription(t){t.target.closest(".ticket").querySelector(".ticket__description").classList.toggle("hidden")}closeDeleteModal(){const t=document.querySelector(".modal__delete");t.querySelector(".modal__close").addEventListener("click",(()=>{t.classList.add("hidden")}))}closeEditModal(){const t=document.querySelector(".modal__edit");t.querySelector(".modal__close").addEventListener("click",(()=>{t.classList.add("hidden")}))}async addNewTicket(t){await this.api.create(t,(t=>{this.renderTickets(t)}))}async changeStatus(t){this.currentEditObj=await this.api.get(t),this.currentEditObj.status=!this.currentEditObj.status,await this.api.update(t,this.currentEditObj,(t=>{this.ticketContainer.textContent="",this.renderTickets(t)})),this.currentEditObj=null}async editTicket(t){this.currentEditObj=await this.api.get(t),this.showEditModal(this.currentEditObj)}async makeEdit(t){this.currentEditObj=await this.api.get(t),this.currentEditObj.name=this.formElement.elements.name.value,this.currentEditObj.description=this.formElement.elements.description.value,await this.api.update(t,this.currentEditObj,(t=>{this.ticketContainer.textContent="",this.renderTickets(t)})),this.currentEditObj=null}async deleteTicket(t){await this.api.delete(t,(t=>{this.ticketContainer.textContent="",this.renderTickets(t)})),this.currentEditObj=null}}(n).init()})()})();